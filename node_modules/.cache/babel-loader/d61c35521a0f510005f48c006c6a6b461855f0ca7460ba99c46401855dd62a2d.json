{"ast":null,"code":"/**\n * Optimized Dashboard Component\n * Clean, maintainable dashboard using the new modular architecture\n */import React,{useState,useEffect,useCallback,useMemo}from'react';import{motion}from'framer-motion';import{BRANDING,EXPECTED_PROTOCOL_COUNT,ANIMATION_DURATIONS,ANIMATION_DELAYS,THEME_COLORS}from'../constants';import{formatCurrency,formatTokenAmount}from'../utils/formatters';import{getProtocolColor,sortArray,isValidProtocolCount}from'../utils/helpers';import{OptimizedDataService}from'../services/optimizedDataService';import{Header}from'./layout/Header';import{Footer}from'./layout/Footer';import{OptimizedChart}from'./charts/OptimizedChart';import{ProtocolLogoImage}from'./ProtocolLogo';/**\n * Global market statistics component\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GlobalStatsSection=/*#__PURE__*/React.memo(_ref=>{let{stats}=_ref;return/*#__PURE__*/_jsx(motion.div,{style:{background:THEME_COLORS.MEDIUM_BLACK,borderBottom:`1px solid ${THEME_COLORS.LIGHT_BLACK}`},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:ANIMATION_DELAYS.SHORT,duration:ANIMATION_DURATIONS.NORMAL},children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-5 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400 mb-1\",children:\"Protocols\"}),/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-white\",children:stats.totalCoins})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400 mb-1\",children:\"Total Market Cap\"}),/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-white\",children:formatCurrency(stats.totalMarketCap)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400 mb-1\",children:\"24h Volume\"}),/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-white\",children:formatCurrency(stats.total24hVolume)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400 mb-1\",children:\"Tokens Bought Back\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-white\",children:[formatTokenAmount(stats.totalTokensBoughtBack),\"M\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400 mb-1\",children:\"Total Revenue\"}),/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-white\",children:formatCurrency(stats.totalRevenue)})]})]})})});});GlobalStatsSection.displayName='GlobalStatsSection';/**\n * Description section component\n */const DescriptionSection=/*#__PURE__*/React.memo(()=>/*#__PURE__*/_jsx(motion.div,{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:ANIMATION_DELAYS.MEDIUM,duration:ANIMATION_DURATIONS.NORMAL},children:/*#__PURE__*/_jsx(\"div\",{className:\"dark-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-white mb-3 font-mono\",children:\"\\uD83C\\uDFDB\\uFE0F DAO Treasury Management Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-300 leading-relaxed max-w-4xl mx-auto\",children:BRANDING.DESCRIPTION})]})})}));DescriptionSection.displayName='DescriptionSection';/**\n * Protocol selector component\n */const ProtocolSelector=/*#__PURE__*/React.memo(_ref2=>{let{protocols,selectedProtocol,onProtocolSelect}=_ref2;return/*#__PURE__*/_jsxs(motion.div,{className:\"dark-card\",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:ANIMATION_DELAYS.LONG,duration:ANIMATION_DURATIONS.NORMAL},children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-white mb-4 font-mono\",children:\"Select Protocol\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:protocols.map(protocol=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>onProtocolSelect(protocol.protocol),className:`w-full text-left p-3 rounded-lg transition-all ${selectedProtocol===protocol.protocol?'border bg-opacity-10 hover:bg-opacity-20':'border border-transparent hover:bg-[#1a1a1a]'}`,style:selectedProtocol===protocol.protocol?{borderColor:THEME_COLORS.PRIMARY_GREEN,backgroundColor:`${THEME_COLORS.PRIMARY_GREEN}1a`}:{},children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(ProtocolLogoImage,{protocol:protocol.protocol,size:\"md\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-white\",children:protocol.protocol}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-400\",children:protocol.token})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-white font-mono\",children:formatCurrency(protocol.totalValueUSD)}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",style:{color:THEME_COLORS.PRIMARY_GREEN},children:[\"+\",protocol.circulatingSupplyPercent,\"%\"]})]})]})},protocol.protocol))})]});});ProtocolSelector.displayName='ProtocolSelector';/**\n * Protocol rankings table component\n */const ProtocolTable=/*#__PURE__*/React.memo(_ref3=>{let{protocols,selectedProtocol,sortBy,sortOrder,onProtocolSelect,onSort,onSortByChange,onSortOrderChange}=_ref3;const SortIcon=_ref4=>{let{column}=_ref4;return sortBy===column?/*#__PURE__*/_jsx(\"svg\",{className:`w-3 h-3 transition-transform ${sortOrder==='desc'?'rotate-180':''}`,fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\",clipRule:\"evenodd\"})}):null;};return/*#__PURE__*/_jsx(motion.div,{className:\"mt-8\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:ANIMATION_DELAYS.VERY_LONG,duration:ANIMATION_DURATIONS.NORMAL},children:/*#__PURE__*/_jsxs(\"div\",{className:\"dark-card overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4\",style:{borderBottom:'1px solid #1a1a1a'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-white font-mono\",children:\"Protocol Buyback Rankings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm text-gray-400 font-mono\",children:\"Sort by:\"}),/*#__PURE__*/_jsxs(\"select\",{value:sortBy,onChange:e=>onSortByChange(e.target.value),className:\"px-3 py-1 text-sm text-white border border-gray-600 rounded font-mono focus:outline-none transition-colors\",style:{backgroundColor:THEME_COLORS.MEDIUM_BLACK,borderColor:'focus:'+THEME_COLORS.PRIMARY_GREEN},onFocus:e=>e.target.style.borderColor=THEME_COLORS.PRIMARY_GREEN,onBlur:e=>e.target.style.borderColor='#4b5563',children:[/*#__PURE__*/_jsx(\"option\",{value:\"buybackValue\",children:\"Buyback Value\"}),/*#__PURE__*/_jsx(\"option\",{value:\"revenue\",children:\"Protocol Revenue\"}),/*#__PURE__*/_jsx(\"option\",{value:\"tokensBought\",children:\"Tokens Bought\"}),/*#__PURE__*/_jsx(\"option\",{value:\"change\",children:\"Supply Reduced\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm text-gray-400 font-mono\",children:\"Order:\"}),/*#__PURE__*/_jsxs(\"select\",{value:sortOrder,onChange:e=>onSortOrderChange(e.target.value),className:\"px-3 py-1 text-sm text-white border border-gray-600 rounded font-mono focus:outline-none transition-colors\",style:{backgroundColor:THEME_COLORS.MEDIUM_BLACK,borderColor:'focus:'+THEME_COLORS.PRIMARY_GREEN},onFocus:e=>e.target.style.borderColor=THEME_COLORS.PRIMARY_GREEN,onBlur:e=>e.target.style.borderColor='#4b5563',children:[/*#__PURE__*/_jsx(\"option\",{value:\"desc\",children:\"Highest First\"}),/*#__PURE__*/_jsx(\"option\",{value:\"asc\",children:\"Lowest First\"})]})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{style:{background:THEME_COLORS.DARK_BLACK},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider font-mono\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider font-mono\",children:\"Protocol\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider cursor-pointer hover:text-white transition-colors font-mono\",onClick:()=>onSort('marketCap'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[\"Buyback Value\",/*#__PURE__*/_jsx(SortIcon,{column:\"marketCap\"})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider cursor-pointer hover:text-white transition-colors font-mono\",onClick:()=>onSort('volume'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[\"Protocol Revenue\",/*#__PURE__*/_jsx(SortIcon,{column:\"volume\"})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider cursor-pointer hover:text-white transition-colors font-mono\",onClick:()=>onSort('change'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[\"Tokens Bought\",/*#__PURE__*/_jsx(SortIcon,{column:\"change\"})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider cursor-pointer hover:text-white transition-colors font-mono\",onClick:()=>onSort('change'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[\"Supply Reduced\",/*#__PURE__*/_jsx(SortIcon,{column:\"change\"})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider font-mono\",children:\"Fee Allocation\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{style:{background:THEME_COLORS.MEDIUM_BLACK},children:protocols.map((protocol,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"cursor-pointer transition-colors border-b border-[#1a1a1a] hover:bg-[#151515]\",onClick:()=>onProtocolSelect(protocol.protocol),children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",children:index+1}),selectedProtocol===protocol.protocol&&/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 rounded-full\",style:{background:THEME_COLORS.PRIMARY_GREEN}})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(ProtocolLogoImage,{protocol:protocol.protocol,size:\"md\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-white\",children:protocol.protocol}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-400\",children:protocol.token})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-white font-mono\",children:formatCurrency(protocol.totalValueUSD)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-white font-mono\",children:formatCurrency(protocol.estimatedAnnualBuyback*0.15)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-white font-mono\",children:formatTokenAmount(protocol.totalRepurchased)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium font-mono\",style:{color:THEME_COLORS.PRIMARY_GREEN},children:[protocol.circulatingSupplyPercent,\"%\"]})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-white font-mono\",children:[protocol.feeAllocationPercent,\"%\"]})]},protocol.protocol))})]})})]})});});ProtocolTable.displayName='ProtocolTable';/**\n * Loading component\n */const LoadingSpinner=/*#__PURE__*/React.memo(()=>/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-black flex items-center justify-center\",children:/*#__PURE__*/_jsxs(motion.div,{className:\"text-center\",initial:{opacity:0,scale:0.9},animate:{opacity:1,scale:1},transition:{duration:ANIMATION_DURATIONS.NORMAL},children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-16 w-16 border-b-4 mx-auto mb-6\",style:{borderBottomColor:THEME_COLORS.PRIMARY_GREEN}}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300 text-lg font-mono\",children:\"Loading market data...\"})]})}));LoadingSpinner.displayName='LoadingSpinner';/**\n * Main Optimized Dashboard Component\n */export const OptimizedDashboard=()=>{// State management\nconst[state,setState]=useState({buybackData:[],historicalData:[],selectedProtocol:'Hyperliquid',sortBy:'marketCap',sortOrder:'desc',loading:true,error:null,lastUpdated:null});const dataService=OptimizedDataService.getInstance();// Memoized calculations\nconst globalStats=useMemo(()=>{return{totalCoins:state.buybackData.length,totalMarketCap:state.buybackData.reduce((sum,data)=>sum+data.totalValueUSD*10,0),total24hVolume:state.buybackData.reduce((sum,data)=>sum+data.estimatedAnnualBuyback/365,0),totalTokensBoughtBack:state.buybackData.reduce((sum,data)=>sum+data.totalRepurchased,0),totalRevenue:state.buybackData.reduce((sum,data)=>sum+data.totalValueUSD,0)};},[state.buybackData]);const sortedProtocols=useMemo(()=>{return sortArray(state.buybackData,protocol=>{switch(state.sortBy){case'marketCap':return protocol.totalValueUSD;case'volume':return protocol.estimatedAnnualBuyback;case'change':return protocol.circulatingSupplyPercent;default:return protocol.totalValueUSD;}},state.sortOrder);},[state.buybackData,state.sortBy,state.sortOrder]);const chartData=useMemo(()=>{return state.historicalData.filter(item=>item.protocol===state.selectedProtocol).map(item=>({timestamp:item.timestamp,buybacks:item.cumulative_value||item.value_usd||0,// Total buyback value\nrevenue:(item.cumulative_value||0)*0.15,// Estimated revenue (15% of buybacks)\ntokensBought:item.cumulative_tokens||0,// Number of tokens bought\nchange24h:item.change24h||Math.random()*20-10})).sort((a,b)=>new Date(a.timestamp).getTime()-new Date(b.timestamp).getTime());},[state.historicalData,state.selectedProtocol]);// Event handlers\nconst fetchData=useCallback(async()=>{try{setState(prev=>({...prev,loading:true,error:null}));const[buyback,historical]=await Promise.all([dataService.getAllBuybackData(),dataService.getHistoricalChartData(undefined,30)]);if(!isValidProtocolCount(buyback.length)){console.warn(`Unexpected protocol count: ${buyback.length}, expected: ${EXPECTED_PROTOCOL_COUNT}`);}setState(prev=>({...prev,buybackData:buyback,historicalData:historical,loading:false,lastUpdated:new Date()}));}catch(err){console.error('Failed to fetch data:',err);setState(prev=>({...prev,loading:false,error:err instanceof Error?err.message:'Unknown error occurred'}));}},[dataService]);const handleProtocolSelect=useCallback(protocol=>{setState(prev=>({...prev,selectedProtocol:protocol}));},[]);const handleSort=useCallback(column=>{setState(prev=>({...prev,sortBy:column,sortOrder:prev.sortBy===column&&prev.sortOrder==='desc'?'asc':'desc'}));},[]);// Effects\nuseEffect(()=>{fetchData();const interval=setInterval(fetchData,5*60*1000);// 5 minutes\nreturn()=>clearInterval(interval);},[fetchData]);// Error state\nif(state.error){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-black flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-red-400 text-6xl mb-4\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-white mb-2\",children:\"Error Loading Data\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 mb-4\",children:state.error}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchData,className:\"px-4 py-2 text-black rounded-lg transition-colors\",style:{background:THEME_COLORS.PRIMARY_GREEN},onMouseEnter:e=>{e.currentTarget.style.background=THEME_COLORS.SECONDARY_GREEN;},onMouseLeave:e=>{e.currentTarget.style.background=THEME_COLORS.PRIMARY_GREEN;},children:\"Retry\"})]})});}// Loading state\nif(state.loading){return/*#__PURE__*/_jsx(LoadingSpinner,{});}// Main dashboard\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-black flex flex-col\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(GlobalStatsSection,{stats:globalStats}),/*#__PURE__*/_jsx(DescriptionSection,{}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-2\",children:/*#__PURE__*/_jsx(OptimizedChart,{data:chartData,title:`${state.selectedProtocol} Buyback Activity`,color:getProtocolColor(state.selectedProtocol),height:400,showVolume:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsx(ProtocolSelector,{protocols:state.buybackData,selectedProtocol:state.selectedProtocol,onProtocolSelect:handleProtocolSelect})})]}),/*#__PURE__*/_jsx(ProtocolTable,{protocols:sortedProtocols,selectedProtocol:state.selectedProtocol,sortBy:state.sortBy,sortOrder:state.sortOrder,onProtocolSelect:handleProtocolSelect,onSort:handleSort,onSortByChange:sortBy=>setState(prev=>({...prev,sortBy})),onSortOrderChange:sortOrder=>setState(prev=>({...prev,sortOrder}))})]})}),/*#__PURE__*/_jsx(Footer,{})]});};export default OptimizedDashboard;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","motion","BRANDING","EXPECTED_PROTOCOL_COUNT","ANIMATION_DURATIONS","ANIMATION_DELAYS","THEME_COLORS","formatCurrency","formatTokenAmount","getProtocolColor","sortArray","isValidProtocolCount","OptimizedDataService","Header","Footer","OptimizedChart","ProtocolLogoImage","jsx","_jsx","jsxs","_jsxs","GlobalStatsSection","memo","_ref","stats","div","style","background","MEDIUM_BLACK","borderBottom","LIGHT_BLACK","initial","opacity","y","animate","transition","delay","SHORT","duration","NORMAL","children","className","totalCoins","totalMarketCap","total24hVolume","totalTokensBoughtBack","totalRevenue","displayName","DescriptionSection","MEDIUM","DESCRIPTION","ProtocolSelector","_ref2","protocols","selectedProtocol","onProtocolSelect","x","LONG","map","protocol","onClick","borderColor","PRIMARY_GREEN","backgroundColor","size","token","totalValueUSD","color","circulatingSupplyPercent","ProtocolTable","_ref3","sortBy","sortOrder","onSort","onSortByChange","onSortOrderChange","SortIcon","_ref4","column","fill","viewBox","fillRule","d","clipRule","VERY_LONG","value","onChange","e","target","onFocus","onBlur","DARK_BLACK","index","estimatedAnnualBuyback","totalRepurchased","feeAllocationPercent","LoadingSpinner","scale","borderBottomColor","OptimizedDashboard","state","setState","buybackData","historicalData","loading","error","lastUpdated","dataService","getInstance","globalStats","length","reduce","sum","data","sortedProtocols","chartData","filter","item","timestamp","buybacks","cumulative_value","value_usd","revenue","tokensBought","cumulative_tokens","change24h","Math","random","sort","a","b","Date","getTime","fetchData","prev","buyback","historical","Promise","all","getAllBuybackData","getHistoricalChartData","undefined","console","warn","err","Error","message","handleProtocolSelect","handleSort","interval","setInterval","clearInterval","onMouseEnter","currentTarget","SECONDARY_GREEN","onMouseLeave","title","height","showVolume"],"sources":["/Users/gherardolattanzi/treasury/src/components/OptimizedDashboard.tsx"],"sourcesContent":["/**\n * Optimized Dashboard Component\n * Clean, maintainable dashboard using the new modular architecture\n */\n\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { motion } from 'framer-motion';\nimport { \n  BRANDING, \n  EXPECTED_PROTOCOL_COUNT,\n  ANIMATION_DURATIONS,\n  ANIMATION_DELAYS,\n  THEME_COLORS \n} from '../constants';\nimport { formatCurrency, formatTokenAmount } from '../utils/formatters';\nimport { getProtocolColor, sortArray, isValidProtocolCount } from '../utils/helpers';\nimport { OptimizedDataService } from '../services/optimizedDataService';\nimport { Header } from './layout/Header';\nimport { Footer } from './layout/Footer';\nimport { OptimizedChart } from './charts/OptimizedChart';\nimport { ProtocolLogoImage } from './ProtocolLogo';\nimport type { \n  BuybackData, \n  GlobalStats, \n  SortOption, \n  SortOrder,\n  DashboardState \n} from '../types';\n\n/**\n * Global market statistics component\n */\ninterface GlobalStatsProps {\n  stats: GlobalStats;\n}\n\nconst GlobalStatsSection = React.memo<GlobalStatsProps>(({ stats }) => (\n  <motion.div \n    style={{ \n      background: THEME_COLORS.MEDIUM_BLACK, \n      borderBottom: `1px solid ${THEME_COLORS.LIGHT_BLACK}` \n    }}\n    initial={{ opacity: 0, y: 20 }}\n    animate={{ opacity: 1, y: 0 }}\n    transition={{ delay: ANIMATION_DELAYS.SHORT, duration: ANIMATION_DURATIONS.NORMAL }}\n  >\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n      <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\n        <div>\n          <div className=\"text-xs text-gray-400 mb-1\">Protocols</div>\n          <div className=\"font-semibold text-white\">{stats.totalCoins}</div>\n        </div>\n        <div>\n          <div className=\"text-xs text-gray-400 mb-1\">Total Market Cap</div>\n          <div className=\"font-semibold text-white\">{formatCurrency(stats.totalMarketCap)}</div>\n        </div>\n        <div>\n          <div className=\"text-xs text-gray-400 mb-1\">24h Volume</div>\n          <div className=\"font-semibold text-white\">{formatCurrency(stats.total24hVolume)}</div>\n        </div>\n        <div>\n          <div className=\"text-xs text-gray-400 mb-1\">Tokens Bought Back</div>\n          <div className=\"font-semibold text-white\">{formatTokenAmount(stats.totalTokensBoughtBack)}M</div>\n        </div>\n        <div>\n          <div className=\"text-xs text-gray-400 mb-1\">Total Revenue</div>\n          <div className=\"font-semibold text-white\">{formatCurrency(stats.totalRevenue)}</div>\n        </div>\n      </div>\n    </div>\n  </motion.div>\n));\n\nGlobalStatsSection.displayName = 'GlobalStatsSection';\n\n/**\n * Description section component\n */\nconst DescriptionSection = React.memo(() => (\n  <motion.div \n    className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\"\n    initial={{ opacity: 0, y: 20 }}\n    animate={{ opacity: 1, y: 0 }}\n    transition={{ delay: ANIMATION_DELAYS.MEDIUM, duration: ANIMATION_DURATIONS.NORMAL }}\n  >\n    <div className=\"dark-card\">\n      <div className=\"text-center\">\n        <h2 className=\"text-lg font-semibold text-white mb-3 font-mono\">\n          🏛️ DAO Treasury Management Dashboard\n        </h2>\n        <p className=\"text-sm text-gray-300 leading-relaxed max-w-4xl mx-auto\">\n          {BRANDING.DESCRIPTION}\n        </p>\n      </div>\n    </div>\n  </motion.div>\n));\n\nDescriptionSection.displayName = 'DescriptionSection';\n\n/**\n * Protocol selector component\n */\ninterface ProtocolSelectorProps {\n  protocols: BuybackData[];\n  selectedProtocol: string;\n  onProtocolSelect: (protocol: string) => void;\n}\n\nconst ProtocolSelector = React.memo<ProtocolSelectorProps>(({\n  protocols,\n  selectedProtocol,\n  onProtocolSelect\n}) => (\n  <motion.div \n    className=\"dark-card\"\n    initial={{ opacity: 0, x: 20 }}\n    animate={{ opacity: 1, x: 0 }}\n    transition={{ delay: ANIMATION_DELAYS.LONG, duration: ANIMATION_DURATIONS.NORMAL }}\n  >\n    <h3 className=\"text-lg font-semibold text-white mb-4 font-mono\">Select Protocol</h3>\n    <div className=\"space-y-2\">\n      {protocols.map((protocol) => (\n        <button\n          key={protocol.protocol}\n          onClick={() => onProtocolSelect(protocol.protocol)}\n          className={`w-full text-left p-3 rounded-lg transition-all ${\n            selectedProtocol === protocol.protocol\n              ? 'border bg-opacity-10 hover:bg-opacity-20'\n              : 'border border-transparent hover:bg-[#1a1a1a]'\n          }`}\n          style={\n            selectedProtocol === protocol.protocol\n              ? {\n                  borderColor: THEME_COLORS.PRIMARY_GREEN,\n                  backgroundColor: `${THEME_COLORS.PRIMARY_GREEN}1a`\n                }\n              : {}\n          }\n        >\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <ProtocolLogoImage protocol={protocol.protocol} size=\"md\" />\n              <div>\n                <div className=\"font-medium text-white\">{protocol.protocol}</div>\n                <div className=\"text-sm text-gray-400\">{protocol.token}</div>\n              </div>\n            </div>\n            <div className=\"text-right\">\n              <div className=\"font-medium text-white font-mono\">\n                {formatCurrency(protocol.totalValueUSD)}\n              </div>\n              <div className=\"text-sm\" style={{ color: THEME_COLORS.PRIMARY_GREEN }}>+{protocol.circulatingSupplyPercent}%</div>\n            </div>\n          </div>\n        </button>\n      ))}\n    </div>\n  </motion.div>\n));\n\nProtocolSelector.displayName = 'ProtocolSelector';\n\n/**\n * Protocol rankings table component\n */\ninterface ProtocolTableProps {\n  protocols: BuybackData[];\n  selectedProtocol: string;\n  sortBy: SortOption;\n  sortOrder: SortOrder;\n  onProtocolSelect: (protocol: string) => void;\n  onSort: (column: SortOption) => void;\n  onSortByChange: (sortBy: SortOption) => void;\n  onSortOrderChange: (sortOrder: SortOrder) => void;\n}\n\nconst ProtocolTable = React.memo<ProtocolTableProps>(({\n  protocols,\n  selectedProtocol,\n  sortBy,\n  sortOrder,\n  onProtocolSelect,\n  onSort,\n  onSortByChange,\n  onSortOrderChange\n}) => {\n  const SortIcon = ({ column }: { column: SortOption }) => (\n    sortBy === column ? (\n      <svg \n        className={`w-3 h-3 transition-transform ${sortOrder === 'desc' ? 'rotate-180' : ''}`} \n        fill=\"currentColor\" \n        viewBox=\"0 0 20 20\"\n      >\n        <path \n          fillRule=\"evenodd\" \n          d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" \n          clipRule=\"evenodd\" \n        />\n      </svg>\n    ) : null\n  );\n\n  return (\n    <motion.div \n      className=\"mt-8\"\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ delay: ANIMATION_DELAYS.VERY_LONG, duration: ANIMATION_DURATIONS.NORMAL }}\n    >\n      <div className=\"dark-card overflow-hidden\">\n        <div className=\"px-6 py-4\" style={{ borderBottom: '1px solid #1a1a1a' }}>\n          <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n            <h3 className=\"text-lg font-semibold text-white font-mono\">Protocol Buyback Rankings</h3>\n            \n            {/* Filter Controls */}\n            <div className=\"flex flex-col sm:flex-row gap-3\">\n              <div className=\"flex items-center gap-2\">\n                <label className=\"text-sm text-gray-400 font-mono\">Sort by:</label>\n                <select\n                  value={sortBy}\n                  onChange={(e) => onSortByChange(e.target.value as SortOption)}\n                  className=\"px-3 py-1 text-sm text-white border border-gray-600 rounded font-mono focus:outline-none transition-colors\"\n                  style={{ \n                    backgroundColor: THEME_COLORS.MEDIUM_BLACK,\n                    borderColor: 'focus:' + THEME_COLORS.PRIMARY_GREEN\n                  }}\n                  onFocus={(e) => e.target.style.borderColor = THEME_COLORS.PRIMARY_GREEN}\n                  onBlur={(e) => e.target.style.borderColor = '#4b5563'}\n                >\n                  <option value=\"buybackValue\">Buyback Value</option>\n                  <option value=\"revenue\">Protocol Revenue</option>\n                  <option value=\"tokensBought\">Tokens Bought</option>\n                  <option value=\"change\">Supply Reduced</option>\n                </select>\n              </div>\n              \n              <div className=\"flex items-center gap-2\">\n                <label className=\"text-sm text-gray-400 font-mono\">Order:</label>\n                <select\n                  value={sortOrder}\n                  onChange={(e) => onSortOrderChange(e.target.value as SortOrder)}\n                  className=\"px-3 py-1 text-sm text-white border border-gray-600 rounded font-mono focus:outline-none transition-colors\"\n                  style={{ \n                    backgroundColor: THEME_COLORS.MEDIUM_BLACK,\n                    borderColor: 'focus:' + THEME_COLORS.PRIMARY_GREEN\n                  }}\n                  onFocus={(e) => e.target.style.borderColor = THEME_COLORS.PRIMARY_GREEN}\n                  onBlur={(e) => e.target.style.borderColor = '#4b5563'}\n                >\n                  <option value=\"desc\">Highest First</option>\n                  <option value=\"asc\">Lowest First</option>\n                </select>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead style={{ background: THEME_COLORS.DARK_BLACK }}>\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider font-mono\">\n                  #\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider font-mono\">\n                  Protocol\n                </th>\n                <th \n                  className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider cursor-pointer hover:text-white transition-colors font-mono\"\n                  onClick={() => onSort('marketCap')}\n                >\n                  <div className=\"flex items-center gap-1\">\n                    Buyback Value\n                    <SortIcon column=\"marketCap\" />\n                  </div>\n                </th>\n                <th \n                  className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider cursor-pointer hover:text-white transition-colors font-mono\"\n                  onClick={() => onSort('volume')}\n                >\n                  <div className=\"flex items-center gap-1\">\n                    Protocol Revenue\n                    <SortIcon column=\"volume\" />\n                  </div>\n                </th>\n                <th \n                  className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider cursor-pointer hover:text-white transition-colors font-mono\"\n                  onClick={() => onSort('change')}\n                >\n                  <div className=\"flex items-center gap-1\">\n                    Tokens Bought\n                    <SortIcon column=\"change\" />\n                  </div>\n                </th>\n                <th \n                  className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider cursor-pointer hover:text-white transition-colors font-mono\"\n                  onClick={() => onSort('change')}\n                >\n                  <div className=\"flex items-center gap-1\">\n                    Supply Reduced\n                    <SortIcon column=\"change\" />\n                  </div>\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider font-mono\">\n                  Fee Allocation\n                </th>\n              </tr>\n            </thead>\n            <tbody style={{ background: THEME_COLORS.MEDIUM_BLACK }}>\n              {protocols.map((protocol, index) => (\n                <tr \n                  key={protocol.protocol} \n                  className=\"cursor-pointer transition-colors border-b border-[#1a1a1a] hover:bg-[#151515]\"\n                  onClick={() => onProtocolSelect(protocol.protocol)}\n                >\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-white\">\n                    <div className=\"flex items-center\">\n                      <span className=\"mr-2\">{index + 1}</span>\n                      {selectedProtocol === protocol.protocol && (\n                        <div \n                          className=\"w-2 h-2 rounded-full\" \n                          style={{ background: THEME_COLORS.PRIMARY_GREEN }}\n                        />\n                      )}\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"flex items-center gap-3\">\n                      <ProtocolLogoImage protocol={protocol.protocol} size=\"md\" />\n                      <div>\n                        <div className=\"font-medium text-white\">{protocol.protocol}</div>\n                        <div className=\"text-sm text-gray-400\">{protocol.token}</div>\n                      </div>\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-white font-mono\">\n                    {formatCurrency(protocol.totalValueUSD)}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-white font-mono\">\n                    {formatCurrency(protocol.estimatedAnnualBuyback * 0.15)}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-white font-mono\">\n                    {formatTokenAmount(protocol.totalRepurchased)}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <span className=\"text-sm font-medium font-mono\" style={{ color: THEME_COLORS.PRIMARY_GREEN }}>\n                      {protocol.circulatingSupplyPercent}%\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-white font-mono\">\n                    {protocol.feeAllocationPercent}%\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </motion.div>\n  );\n});\n\nProtocolTable.displayName = 'ProtocolTable';\n\n/**\n * Loading component\n */\nconst LoadingSpinner = React.memo(() => (\n  <div className=\"min-h-screen bg-black flex items-center justify-center\">\n    <motion.div \n      className=\"text-center\"\n      initial={{ opacity: 0, scale: 0.9 }}\n      animate={{ opacity: 1, scale: 1 }}\n      transition={{ duration: ANIMATION_DURATIONS.NORMAL }}\n    >\n      <div \n        className=\"animate-spin rounded-full h-16 w-16 border-b-4 mx-auto mb-6\" \n        style={{ borderBottomColor: THEME_COLORS.PRIMARY_GREEN }}\n      />\n      <p className=\"text-gray-300 text-lg font-mono\">Loading market data...</p>\n    </motion.div>\n  </div>\n));\n\nLoadingSpinner.displayName = 'LoadingSpinner';\n\n/**\n * Main Optimized Dashboard Component\n */\nexport const OptimizedDashboard: React.FC = () => {\n  // State management\n  const [state, setState] = useState<DashboardState>({\n    buybackData: [],\n    historicalData: [],\n    selectedProtocol: 'Hyperliquid',\n    sortBy: 'marketCap',\n    sortOrder: 'desc',\n    loading: true,\n    error: null,\n    lastUpdated: null,\n  });\n\n  const dataService = OptimizedDataService.getInstance();\n\n  // Memoized calculations\n  const globalStats = useMemo((): GlobalStats => {\n    return {\n      totalCoins: state.buybackData.length,\n      totalMarketCap: state.buybackData.reduce((sum, data) => sum + data.totalValueUSD * 10, 0),\n      total24hVolume: state.buybackData.reduce((sum, data) => sum + data.estimatedAnnualBuyback / 365, 0),\n      totalTokensBoughtBack: state.buybackData.reduce((sum, data) => sum + data.totalRepurchased, 0),\n      totalRevenue: state.buybackData.reduce((sum, data) => sum + data.totalValueUSD, 0),\n    };\n  }, [state.buybackData]);\n\n  const sortedProtocols = useMemo(() => {\n    return sortArray(\n      state.buybackData,\n      (protocol) => {\n        switch (state.sortBy) {\n          case 'marketCap': return protocol.totalValueUSD;\n          case 'volume': return protocol.estimatedAnnualBuyback;\n          case 'change': return protocol.circulatingSupplyPercent;\n          default: return protocol.totalValueUSD;\n        }\n      },\n      state.sortOrder\n    );\n  }, [state.buybackData, state.sortBy, state.sortOrder]);\n\n  const chartData = useMemo(() => {\n    return state.historicalData\n      .filter(item => item.protocol === state.selectedProtocol)\n      .map(item => ({\n        timestamp: item.timestamp,\n        buybacks: item.cumulative_value || item.value_usd || 0,  // Total buyback value\n        revenue: (item.cumulative_value || 0) * 0.15,           // Estimated revenue (15% of buybacks)\n        tokensBought: item.cumulative_tokens || 0,              // Number of tokens bought\n        change24h: item.change24h || Math.random() * 20 - 10,\n      }))\n      .sort((a, b) => new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime());\n  }, [state.historicalData, state.selectedProtocol]);\n\n  // Event handlers\n  const fetchData = useCallback(async () => {\n    try {\n      setState(prev => ({ ...prev, loading: true, error: null }));\n      \n      const [buyback, historical] = await Promise.all([\n        dataService.getAllBuybackData(),\n        dataService.getHistoricalChartData(undefined, 30)\n      ]);\n\n      if (!isValidProtocolCount(buyback.length)) {\n        console.warn(`Unexpected protocol count: ${buyback.length}, expected: ${EXPECTED_PROTOCOL_COUNT}`);\n      }\n\n      setState(prev => ({\n        ...prev,\n        buybackData: buyback,\n        historicalData: historical,\n        loading: false,\n        lastUpdated: new Date(),\n      }));\n\n    } catch (err) {\n      console.error('Failed to fetch data:', err);\n      setState(prev => ({\n        ...prev,\n        loading: false,\n        error: err instanceof Error ? err.message : 'Unknown error occurred',\n      }));\n    }\n  }, [dataService]);\n\n  const handleProtocolSelect = useCallback((protocol: string) => {\n    setState(prev => ({ ...prev, selectedProtocol: protocol }));\n  }, []);\n\n  const handleSort = useCallback((column: SortOption) => {\n    setState(prev => ({\n      ...prev,\n      sortBy: column,\n      sortOrder: prev.sortBy === column && prev.sortOrder === 'desc' ? 'asc' : 'desc',\n    }));\n  }, []);\n\n  // Effects\n  useEffect(() => {\n    fetchData();\n    const interval = setInterval(fetchData, 5 * 60 * 1000); // 5 minutes\n    return () => clearInterval(interval);\n  }, [fetchData]);\n\n  // Error state\n  if (state.error) {\n    return (\n      <div className=\"min-h-screen bg-black flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"text-red-400 text-6xl mb-4\">⚠️</div>\n          <h2 className=\"text-xl font-bold text-white mb-2\">Error Loading Data</h2>\n          <p className=\"text-gray-400 mb-4\">{state.error}</p>\n          <button \n            onClick={fetchData}\n            className=\"px-4 py-2 text-black rounded-lg transition-colors\"\n            style={{ \n              background: THEME_COLORS.PRIMARY_GREEN,\n            }}\n            onMouseEnter={(e) => {\n              e.currentTarget.style.background = THEME_COLORS.SECONDARY_GREEN;\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.background = THEME_COLORS.PRIMARY_GREEN;\n            }}\n          >\n            Retry\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // Loading state\n  if (state.loading) {\n    return <LoadingSpinner />;\n  }\n\n  // Main dashboard\n  return (\n    <div className=\"min-h-screen bg-black flex flex-col\">\n      {/* Header */}\n      <Header />\n\n      {/* Global Market Stats */}\n      <GlobalStatsSection stats={globalStats} />\n\n      {/* Description Section */}\n      <DescriptionSection />\n\n      {/* Main Content */}\n      <div className=\"flex-1\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n            {/* Main Chart */}\n            <div className=\"lg:col-span-2\">\n              <OptimizedChart\n                data={chartData}\n                title={`${state.selectedProtocol} Buyback Activity`}\n                color={getProtocolColor(state.selectedProtocol)}\n                height={400}\n                showVolume={true}\n              />\n            </div>\n\n            {/* Sidebar */}\n            <div className=\"space-y-6\">\n              <ProtocolSelector\n                protocols={state.buybackData}\n                selectedProtocol={state.selectedProtocol}\n                onProtocolSelect={handleProtocolSelect}\n              />\n            </div>\n          </div>\n\n          {/* Protocol Table */}\n          <ProtocolTable\n            protocols={sortedProtocols}\n            selectedProtocol={state.selectedProtocol}\n            sortBy={state.sortBy}\n            sortOrder={state.sortOrder}\n            onProtocolSelect={handleProtocolSelect}\n            onSort={handleSort}\n            onSortByChange={(sortBy) => setState(prev => ({ ...prev, sortBy }))}\n            onSortOrderChange={(sortOrder) => setState(prev => ({ ...prev, sortOrder }))}\n          />\n        </div>\n      </div>\n\n      {/* Footer */}\n      <Footer />\n    </div>\n  );\n};\n\nexport default OptimizedDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}